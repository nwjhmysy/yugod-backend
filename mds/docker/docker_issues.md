### `docker`容器的网络种类

#### 桥接网络（Bridge Network）：（默认）

- 桥接网络是Docker默认使用的网络模式，它通过在主机上创建一个虚拟的桥接接口来为容器提供网络连接。每个容器都会连接到这个桥接接口，并被分配一个IP地址。容器之间可以通过这个桥接接口相互通信，也可以通过主机的网络连接到外部网络。

#### 主机网络（Host Network）：

- 当容器使用主机网络模式时，容器将直接使用主机的网络栈，与主机共享网络命名空间。这意味着容器可以直接访问主机上的网络接口，无需进行端口映射，但这也意味着容器的网络性能受到主机网络性能的限制。

#### 容器网络（**Container** Network）：

- 容器网络模式允许一个容器直接连接到另一个容器的网络栈，从而使它们可以直接通信。这对于容器化应用程序内部的微服务架构非常有用，可以简化容器之间的通信。

#### 无网络（None Network）：

- 无网络模式下，容器没有连接到任何网络，即使容器本身配置了网络接口，也不会被激活。这种模式适用于某些安全或特殊的场景，例如需要完全隔离容器的情况。

#### 覆盖网络（Overlay Network）：

- 覆盖网络是一种跨主机的网络模式，它允许在多个Docker守护进程之间创建虚拟网络，从而使容器可以在不同的主机上相互通信。这对于跨主机部署的集群应用程序非常有用，比如Docker Swarm或Kubernetes集群。

### 网络选择

如果容器需要访问与宿主机在同一局域网下的IP，可以使用以下两种网络方式：

1. **桥接网络（Bridge Network）**：
   - 在桥接网络模式下，容器与宿主机连接到同一个虚拟桥接接口，它们共享同一个网络子网。因此，容器可以通过桥接接口与宿主机在同一局域网下的其他设备进行通信。
2. **主机网络（Host Network）**：
   - 在主机网络模式下，容器直接使用宿主机的网络栈，与宿主机处于同一个网络中。因此，容器可以直接访问宿主机在同一局域网下的其他设备，无需经过额外的网络地址转换或路由。

这两种网络方式都可以满足容器需要与宿主机在同一局域网下的IP进行通信的需求。选择哪种方式取决于具体的使用场景和需求。

### 桥接网络的原理是什么（了解）

桥接网络是 Docker 中最常用的网络模式之一。其原理基于 Linux 内核提供的桥接（Bridge）技术，主要通过创建一个虚拟的网络桥接口（bridge interface）来实现容器之间以及容器与主机之间的网络通信。

以下是桥接网络的基本原理：

1. **虚拟网络桥**：
   - 在主机上创建一个虚拟的网络桥接口，类似于物理交换机。这个虚拟的网络桥会有一个唯一的 MAC 地址，用于唯一标识该桥接口。
2. **容器连接到桥接接口**：
   - 当一个容器创建并连接到桥接网络时，Docker 会自动在主机上创建一个虚拟以太网接口（veth pair）。一端连接到容器内部，另一端连接到虚拟网络桥上。
3. **网络数据包转发**：
   - 当容器之间或容器与主机之间进行网络通信时，网络数据包会通过虚拟网络桥进行转发。数据包从发送方容器的虚拟以太网接口发送到桥接接口，然后根据目标 MAC 地址转发到目标容器或主机。
4. **IP 地址分配**：
   - 桥接网络通常会配置一个子网用于分配给连接到桥接网络的容器。Docker 会为每个容器分配一个唯一的 IP 地址，并在容器启动时为其配置网络参数，包括 IP 地址、子网掩码、网关等。
5. **外部通信**：
   - 容器通过桥接接口连接到主机的物理网络，因此它们可以直接与主机所在的局域网或互联网通信。外部设备也可以通过主机访问容器。

通过桥接网络，Docker 可以在宿主机上创建一个隔离的网络环境，允许容器之间进行通信，并且容器与宿主机以及外部网络之间也可以实现连接和通信。这使得桥接网络成为 Docker 默认的网络模式，并在许多应用场景中被广泛使用。

### docker关于容器网络配置的常见命令

以下是 Docker 中关于容器网络配置的常见命令：

1. **创建一个带有指定网络配置的容器**：

   ```
   docker run --network=<network> <image>
   ```

   - `<network>` 是要连接的网络名称，可以是默认的桥接网络（bridge）、主机网络（host）、容器网络（container），或者用户自定义的网络名称。

2. **查看容器的网络配置信息**：

   ```
   docker inspect <container_name_or_id>
   ```

   这条命令会返回容器的详细信息，其中包括了容器的网络配置信息。

3. **连接容器到指定的网络**：

   ```
   docker network connect <network> <container_name_or_id>
   ```

   这条命令可以将一个运行中的容器连接到指定的网络。

4. **断开容器与指定网络的连接**：

   ```
   docker network disconnect <network> <container_name_or_id>
   ```

   这条命令可以将一个运行中的容器与指定的网络断开连接。

5. **创建自定义网络**：

   ```
   docker network create <network_name>
   ```

   这条命令可以创建一个自定义的 Docker 网络，以便容器可以连接到它。

6. **查看 Docker 中现有的网络**：

   ```
   docker network ls
   ```

   这条命令会列出 Docker 中当前存在的网络，包括默认的桥接网络、主机网络、以及用户自定义的网络。

7. **删除网络**：

   ```
   docker network rm <network_name>
   ```

   这条命令可以删除指定的 Docker 网络。

通过这些命令，可以对 Docker 容器的网络配置进行灵活的管理和调整，以满足不同的应用需求。